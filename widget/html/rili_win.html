<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>日历</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <style type="text/css">
        .text-white {
            color: #ffffff !important;
        }
        .aui-grid [class*=aui-col-] {
            padding: 0.75rem 0;
        }
    </style>
</head>
<body style="background:url('../image/bg.png') no-repeat;background-size: cover;display：inline">
    <!-- 顶部 -->
    <header class="aui-bar aui-bar-nav" id="aui-header" style="background-color:#a33fad">
        <a class="aui-btn aui-pull-left" tapmode onclick="closeWin()">
            <span class="aui-iconfont aui-icon-left"></span>
        </a>
        <div class="aui-title">日历</div>
    </header>

    <section class="aui-content" id="user-info" >
        <div style="position:relative;width:100%;margin：0 auto;height:150px;">
          <div style="width:100%;height:150px;">
            <span style="color:#ffffff;" id="mmshow"></span>
            <span class="aui-iconfont aui-icon-left" style="font-size: 20px;color:#ffffff;margin-right:20px;"></span>
            <span style="color:#ffffff;font-size: 50px;" id="dateshow"></span>
            <span class="aui-iconfont aui-icon-right" style="font-size: 20px;color:#ffffff;margin-left:20px"></span>
          </div>
        </div>
    </section>

    <footer class="aui-bar aui-bar-tab" style="position:fixed;bottom:0px;">
        <div class="aui-bar-tab-item">
            <i class="aui-iconfont aui-icon-paper"></i>
            <div class="aui-bar-tab-label">首页</div>
        </div>
        <div class="aui-bar-tab-item">
            <i class="aui-iconfont aui-icon-menu"></i>
            <div class="aui-bar-tab-label">手环</div>
        </div>
        <div class="aui-bar-tab-item aui-active">
            <i class="aui-iconfont aui-icon-location"></i>
            <div class="aui-bar-tab-label">日历</div>
        </div>
        <div class="aui-bar-tab-item" onclick="fnOpenwoWin();">
            <i class="aui-iconfont aui-icon-my"></i>
            <div class="aui-bar-tab-label">我</div>
        </div>
    </footer>
</body>
<script type="text/javascript" src="../script/api.js" ></script>
<script type="text/javascript">

var myDate = new Date();
        //时间 2016/3/29/00:20
var year = myDate.getFullYear();
        //获取完整的年份(4位,1970-????)  2016
var month = myDate.getMonth()+1;
        //获取当前月份(0-11,0代表1月)  2
var date = myDate.getDate();
        //获取当前日(1-31) 29
var hours = myDate.getHours();
        //获取当前小时数(0-23)  0
var minutes = myDate.getMinutes();
        //获取当前分钟数(0-59)  20
var seconds = myDate.getSeconds();
// alert(date);
var dateshow = document.getElementById('dateshow');
$api.text(dateshow,date);

var mmshow = document.getElementById('mmshow');
$api.text(mmshow,year+"年"+month+"月");

var UICalendar;
apiready = function() {
  UICalendar = api.require('UICalendar');
  fnOpen();
};

function fnOpen(){
  UICalendar.open({
      rect: {
          x: 30,
          y: 180,
          w: api.frameWidth - 60,
          h: 340
      },
      styles: {
          bg: '#fff',
          week: {
              weekdayColor: '#3b3b3b',
              weekendColor: '#a8d400',
              size: 12
          },
          date: {
              color: '#3b3b3b',
              selectedColor: '#fff',
              selectedBg: '#a8d500',
              size: 12
          },
          today: {
              color: 'rgb(230,46,37)',
              bg: ''
          },
          specialDate: {
              color: '#fff'
          }
      },
      specialDate: [{
          date: '2018-06-30'
      }],
      switchMode: 'vertical',
      fixed: false
  }, function(ret, err){
      if( ret ){
           alert( JSON.stringify( ret ) );
      }else{
           alert( JSON.stringify( err ) );
      }
  });
}

function fnSetSpecialDates(){
  UICalendar.setSpecialDates({
      specialDates:[{
         date: '2018-06-29',
         color: '#fff',
         bg: '#0f0'
      },{
         date: '2018-06-30',
         color: '#fff',
         bg: '#0f0'
      }]
  });
}

function fnCancelSpecialDates(){
  UICalendar.cancelSpecialDates({
      specialDates:['2018-06-29','2018-06-30']
  });
}

function fnClose(){
  UICalendar.close();
}

function fnShow(){
  UICalendar.show();
}

function fnHide(){
  UICalendar.hide();
}

function fnNextMonth(){
  UICalendar.nextMonth(function(ret, err){
      if( ret ){
          alert( JSON.stringify( ret ) );
          alert('fnNextMonth');
          var obj = $api.strToJson(ret);
          $api.text(mmshow,obj.year+"年"+obj.month+"月");
      }else{
          // alert( JSON.stringify( err ) );
      }
  });
}

function fnPrevMonth(){
  UICalendar.prevMonth(function(ret, err){
      if( ret ){
          alert( JSON.stringify( ret ) );
          alert('fnPrevMonth');
          var obj = $api.strToJson(ret);
          $api.text(mmshow,obj.year+"年"+obj.month+"月");
      }else{
          // alert( JSON.stringify( err ) );
      }
  });
}

function fnNextYear(){
  UICalendar.nextYear(function(ret, err){
      if( ret ){
          alert( JSON.stringify( ret ) );
          var obj = $api.strToJson(ret);
          $api.text(mmshow,obj.year+"年"+obj.month+"月");
      }else{
          // alert( JSON.stringify( err ) );
      }
  });
}

function fnPrevYear(){
  UICalendar.prevYear(function(ret, err){
      if( ret ){
          alert( JSON.stringify( ret ) );
          var obj = $api.strToJson(ret);
          $api.text(mmshow,obj.year+"年"+obj.month+"月");
      }else{
          // alert( JSON.stringify( err ) );
      }
  });
}

function fnSetDate(){
  UICalendar.setDate({
      date: '2015-08-08',
      ignoreSelected: false
  }, function(ret, err){
      if( ret.status ){
          alert( JSON.stringify( ret ) );
      }else{
          alert( JSON.stringify( err ) );
      }
  });
}

function fnTurnPage(){
  UICalendar.turnPage({
      date: '2015-08'
  });
}

    // 打开手环Window
    function fnOpenshouhuanWin () {
        api.openWin({
            name: 'shouhuan',
            url: './shouhuan_win.html',
            pageParam: {
                name: 'shouhuan'
            }
        });
    }

    // 打开日历Window
    function fnOpenriliWin () {
        api.openWin({
            name: 'rili',
            url: './rili_win.html',
            pageParam: {
                name: 'rili'
            }
        });
    }

    // 打开我Window
    function fnOpenwoWin () {
        api.openWin({
            name: 'wode',
            url: './wode_win.html',
            pageParam: {
                name: 'wode'
            }
        });
    }

    // 打开添加提醒Window
    function fnOpenaddWin () {
        api.openWin({
            name: 'addmessage',
            url: './addmessage_win.html',
            pageParam: {
                name: 'test'
            }
        });
    }


</script>
</html>
